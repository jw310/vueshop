{"remainingRequest":"/Users/lchick1003/Documents/vue3esite/node_modules/babel-loader/lib/index.js!/Users/lchick1003/Documents/vue3esite/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lchick1003/Documents/vue3esite/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lchick1003/Documents/vue3esite/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lchick1003/Documents/vue3esite/src/views/Home.vue","mtime":1575283985000},{"path":"/Users/lchick1003/Documents/vue3esite/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lchick1003/Documents/vue3esite/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lchick1003/Documents/vue3esite/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lchick1003/Documents/vue3esite/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.set\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport $ from \"jquery\"; // 因為此元件無法使用 $，所以要先 import 才能使用\n\nexport default {\n  name: 'Home',\n  data: function data() {\n    return {\n      products: [],\n      product: {},\n      searchText: '',\n      categories: [],\n      isLoading: false,\n      status: {\n        // 個別產品讀取效果\n        loadingItem: ''\n      }\n    };\n  },\n  computed: {\n    // 篩選功能\n    filterData: function filterData() {\n      var vm = this;\n\n      if (vm.searchText) {\n        return vm.products.filter(function (item) {\n          // 用三元運算來處理類別跟關鍵字的運算\n          var data = vm.searchText === item.category ? item.category.toLowerCase().includes(vm.searchText.toLowerCase()) : item.title.toLowerCase().includes(vm.searchText.toLowerCase());\n          return data;\n        });\n      }\n\n      return this.products;\n    }\n  },\n  methods: {\n    getProducts: function getProducts() {\n      var vm = this;\n      var url = \"\".concat(process.env.VUE_APP_APIPATH, \"/api/\").concat(process.env.VUE_APP_CUSTOMPATH, \"/products/all\");\n      vm.isLoading = true;\n      this.$http.get(url).then(function (response) {\n        vm.products = response.data.products; //console.log('取得產品列表:', response);\n\n        vm.getUnique();\n        vm.isLoading = false;\n      });\n    },\n    getProduct: function getProduct(id) {\n      // 查看更多\n      var vm = this;\n      var api = \"\".concat(process.env.VUE_APP_APIPATH, \"/api/\").concat(process.env.VUE_APP_CUSTOMPATH, \"/product/\").concat(id);\n      this.$http.get(api).then(function (response) {\n        //console.log(response);\n        vm.product = response.data.product; //console.log(vm.product);\n\n        $('#productModal').modal('show');\n      });\n    },\n    addtoCart: function addtoCart(id) {\n      var qty = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var vm = this;\n      var url = \"\".concat(process.env.VUE_APP_APIPATH, \"/api/\").concat(process.env.VUE_APP_CUSTOMPATH, \"/cart\");\n      vm.isLoading = true;\n      var item = {\n        product_id: id,\n        qty: qty\n      };\n      vm.isLoading = true;\n      this.$http.post(url, {\n        data: item\n      }).then(function (response) {\n        vm.isLoading = false;\n        console.log('加入購物車:', response);\n      });\n    },\n    getUnique: function getUnique() {\n      var vm = this;\n      var categories = new Set();\n      vm.products.forEach(function (item) {\n        categories.add(item.category); // console.log(categories);\n      });\n      vm.categories = Array.from(categories); //console.log(vm.categories);\n    }\n  },\n  created: function created() {\n    this.getProducts();\n  }\n};",{"version":3,"sources":["Home.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div class=\"container main-content mb-3\">\n      <Loading :active.sync=\"isLoading\"></Loading>\n      <div class=\"row\">\n        <div class=\"col-md-3\">\n          <!-- 左側選單 (List group) -->\n          <div class=\"list-group sticky-top\">\n            <a class=\"list-group-item list-group-item-action\"\n              href=\"#\" @click.prevent=\"searchText = item\"\n              :class=\"{ 'active': item === searchText}\"\n              v-for=\"item in categories\" :key=\"item\">\n              <i class=\"fa fa-street-view\" aria-hidden=\"true\"></i>\n              {{ item }}\n            </a>\n            <a href=\"#\" class=\"list-group-item list-group-item-action\"\n              @click.prevent=\"searchText = ''\"\n              :class=\"{ 'active': searchText === ''}\">\n              全部顯示\n            </a>\n          </div>\n        </div>\n\n        <!-- 子頁面 -->\n        <div class=\"col-md-9\">\n          <div class=\"d-flex mb-4\">\n            <!-- Search bar -->\n            <form class=\"form-inline my-3 my-lg-0\">\n              <div class=\"input-group\">\n                <input class=\"form-control\" type=\"text\" v-model=\"searchText\"\n                  placeholder=\"Search\" aria-label=\"Search\">\n                <div class=\"input-group-append\">\n                  <button class=\"btn btn-outline-secondary\" type=\"button\"\n                    @click=\"searchText = ''\">\n                    <i class=\"fa fa-times\"></i>\n                  </button>\n                </div>\n              </div>\n            </form>\n            <button class=\"btn btn-outline-primary ml-auto\" type=\"button\"\n              @click=\"getProducts\">\n              重新取得產品資料\n            </button>\n          </div>\n          <!-- content -->\n          <div class=\"tab-pane\" id=\"list-gift\">\n            <div class=\"row align-items-stretch\">\n              <!-- 禮品 -->\n              <div class=\"col-md-4 mb-4\" v-for=\"(item) in filterData\" :key=\"item.id\">\n                <div class=\"card border-0 box-shadow text-center h-100\">\n                  <img class=\"card-img-top\" :src=\"item.imageUrl\" alt=\"Card image cap\">\n                  <div class=\"card-body\">\n                    <span class=\"badge badge-secondary float-right\">{{item.category}}</span>\n                    <h4 class=\"card-title\">{{ item.title }}</h4>\n                    <p class=\"card-text text-left\">{{ item.content }}</p>\n                  </div>\n                  <div class=\"card-footer d-flex\">\n                    <button type=\"button\" class=\"btn btn-outline-secondary btn-sm\"\n                        @click=\"getProduct(item.id)\">\n                        <!-- <i class=\"fas fa-spinner fa-spin\"></i> -->\n                        看更多\n                    </button>\n                    <button type=\"button\" class=\"btn btn-outline-danger btn-sm ml-auto\"\n                        @click=\"addtoCart(item.id)\">\n                        <i class=\"fa fa-cart-plus\" aria-hidden=\"true\"></i>\n                        加到購物車\n                    </button>\n                    </div>\n                  <!-- <div class=\"card-footer border-top-0 bg-white\">\n                    <button class=\"btn btn-outline-secondary btn-block btn-sm\"\n                      @click=\"addtoCart(item.id)\">\n                      <i class=\"fa fa-cart-plus\" aria-hidden=\"true\"></i> 加到購物車\n                    </button>\n                  </div> -->\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n        <!-- Modal -->\n        <div class=\"modal fade\" id=\"productModal\" tabindex=\"-1\" role=\"dialog\"\n          aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n            <div class=\"modal-dialog modal-lg\" role=\"document\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\" id=\"exampleModalLabel\">{{ product.title }}</h5>\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                        <span aria-hidden=\"true\">&times;</span> \n                        </button>\n                    </div>\n                    <div class=\"modal-body\">\n                    <img :src=\"product.imageUrl\" class=\"img-fluid\" alt=\"\">\n                        <blockquote class=\"blockquote mt-3\">\n                            <p class=\"mb-0\">{{ product.content }}</p>\n                            <footer class=\"blockquote-footer text-right\">{{ product.description }}</footer>\n                        </blockquote>\n                        <div class=\"d-flex justify-content-between align-items-baseline\">\n                            <div class=\"h4\" v-if=\"!product.price\">{{ product.origin_price }} 元</div>\n                            <del class=\"h6\" v-if=\"product.price\">原價 {{ product.origin_price }} 元</del>\n                            <div class=\"h4\" v-if=\"product.price\">現在只要{{ product.price }} 元</div>\n                        </div>\n                        <select name=\"\" class=\"form-control mt-3\" v-model=\"product.num\">\n                            <option :value=\"num\" v-for=\"num in 10\" :key=\"num\">\n                                選購 {{ num }} {{ product.unit }}\n                            </option>\n                        </select>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <div class=\"text-muted text-nowrap mr-3\">\n                            小計 <strong>{{ product.num * product.price }}</strong> 元\n                        </div>\n                        <button type=\"button\" class=\"btn btn-primary\"\n                        @click=\"addtoCart(product.id, product.num)\">\n                        <!-- <i class=\"fas fa-spinner fa-spin\" v-if=\"product.id === status.LoadingItem\"></i> -->\n                        加到購物車 \n                        </button>\n                    </div>\n                </div>\n            </div>\n         </div>\n\n  </div>\n</template>\n\n<script>\nimport $ from \"jquery\"; // 因為此元件無法使用 $，所以要先 import 才能使用\n\nexport default {\n  name: 'Home',\n  data() {\n    return {\n      products: [],\n      product: {},\n      searchText: '',\n      categories: [],\n      isLoading: false,\n      status: {   // 個別產品讀取效果\n                loadingItem: '',\n      },\n    };\n  },\n  computed: { // 篩選功能\n    filterData() {\n      const vm = this;\n      if (vm.searchText) {\n        return vm.products.filter((item) => {  // 用三元運算來處理類別跟關鍵字的運算\n          const data =  vm.searchText === item.category ? item.category.toLowerCase().includes(vm.searchText.toLowerCase()) : item.title.toLowerCase().includes(vm.searchText.toLowerCase());\n          return data;\n        }); \n      }\n      return this.products;\n    },\n  },\n  methods: {\n    getProducts() {\n      const vm = this;\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/products/all`;\n      vm.isLoading = true;\n      this.$http.get(url).then((response) => {\n        vm.products = response.data.products;\n        //console.log('取得產品列表:', response);\n        vm.getUnique();\n        vm.isLoading = false;\n      });\n    },\n    getProduct(id) {   // 查看更多\n      const vm = this;\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/product/${id}`;\n      this.$http.get(api).then(response => { \n        //console.log(response);\n        vm.product = response.data.product;\n        //console.log(vm.product);\n        $('#productModal').modal('show');\n      }); \n     },\n    addtoCart(id, qty = 1) {\n      const vm = this;\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart`;\n      vm.isLoading = true;\n      const item = {\n        product_id: id,\n        qty,\n      };\n      vm.isLoading = true;\n      this.$http.post(url, { data: item }).then((response) => {\n        vm.isLoading = false;\n        console.log('加入購物車:', response);\n      });\n    },\n    getUnique() {\n      const vm = this;\n      const categories = new Set();\n      vm.products.forEach((item) => {\n        categories.add(item.category);\n      // console.log(categories);\n      });\n      vm.categories = Array.from(categories);\n      //console.log(vm.categories);\n    },   \n  },\n  created() {\n    this.getProducts();\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n\n/* img {\n  width: 50%;  \n  height: auto;\n} */\n\n.badge {\n  c​​lear: both;\n}\n\n</style>\n"],"sourceRoot":"src/views"}]}