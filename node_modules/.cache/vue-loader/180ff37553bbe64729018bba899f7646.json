{"remainingRequest":"/Users/lchick1003/Documents/vue3esite/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lchick1003/Documents/vue3esite/src/views/Home.vue?vue&type=style&index=0&id=fae5bece&scoped=true&lang=css&","dependencies":[{"path":"/Users/lchick1003/Documents/vue3esite/src/views/Home.vue","mtime":1575276957000},{"path":"/Users/lchick1003/Documents/vue3esite/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/lchick1003/Documents/vue3esite/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/lchick1003/Documents/vue3esite/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/lchick1003/Documents/vue3esite/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lchick1003/Documents/vue3esite/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* img {\n  width: 50%;  \n  height: auto;\n} */\n\n.badge {\n  c​​lear: both;\n}\n\n",{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoNA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div class=\"container main-content mb-3\">\n      <Loading :active.sync=\"isLoading\"></Loading>\n      <div class=\"row\">\n        <div class=\"col-md-3\">\n          <!-- 左側選單 (List group) -->\n          <div class=\"list-group sticky-top\">\n            <a class=\"list-group-item list-group-item-action\"\n              href=\"#\" @click.prevent=\"searchText = item\"\n              :class=\"{ 'active': item === searchText}\"\n              v-for=\"item in categories\" :key=\"item\">\n              <i class=\"fa fa-street-view\" aria-hidden=\"true\"></i>\n              {{ item }}\n            </a>\n            <a href=\"#\" class=\"list-group-item list-group-item-action\"\n              @click.prevent=\"searchText = ''\"\n              :class=\"{ 'active': searchText === ''}\">\n              全部顯示\n            </a>\n          </div>\n        </div>\n\n        <!-- 子頁面 -->\n        <div class=\"col-md-9\">\n          <div class=\"d-flex mb-4\">\n            <!-- Search bar -->\n            <form class=\"form-inline my-3 my-lg-0\">\n              <div class=\"input-group\">\n                <input class=\"form-control\" type=\"text\" v-model=\"searchText\"\n                  placeholder=\"Search\" aria-label=\"Search\">\n                <div class=\"input-group-append\">\n                  <button class=\"btn btn-outline-secondary\" type=\"button\"\n                    @click=\"searchText = ''\">\n                    <i class=\"fa fa-times\"></i>\n                  </button>\n                </div>\n              </div>\n            </form>\n            <button class=\"btn btn-outline-primary ml-auto\" type=\"button\"\n              @click=\"getProducts\">\n              重新取得產品資料\n            </button>\n          </div>\n          <!-- content -->\n          <div class=\"tab-pane\" id=\"list-gift\">\n            <div class=\"row align-items-stretch\">\n              <!-- 禮品 -->\n              <div class=\"col-md-4 mb-4\" v-for=\"(item) in filterData\" :key=\"item.id\">\n                <div class=\"card border-0 box-shadow text-center h-100\">\n                  <img class=\"card-img-top\" :src=\"item.imageUrl\" alt=\"Card image cap\">\n                  <div class=\"card-body\">\n                    <span class=\"badge badge-secondary float-right\">{{item.category}}</span>\n                    <h4 class=\"card-title\">{{ item.title }}</h4>\n                    <p class=\"card-text text-left\">{{ item.content }}</p>\n                  </div>\n                  <div class=\"card-footer d-flex\">\n                    <button type=\"button\" class=\"btn btn-outline-secondary btn-sm\"\n                        @click=\"getProduct(item.id)\">\n                        <!-- <i class=\"fas fa-spinner fa-spin\"></i> -->\n                        看更多\n                    </button>\n                    <button type=\"button\" class=\"btn btn-outline-danger btn-sm ml-auto\"\n                        @click=\"addtoCart(item.id)\">\n                        <i class=\"fa fa-cart-plus\" aria-hidden=\"true\"></i>\n                        加到購物車\n                    </button>\n                    </div>\n                  <!-- <div class=\"card-footer border-top-0 bg-white\">\n                    <button class=\"btn btn-outline-secondary btn-block btn-sm\"\n                      @click=\"addtoCart(item.id)\">\n                      <i class=\"fa fa-cart-plus\" aria-hidden=\"true\"></i> 加到購物車\n                    </button>\n                  </div> -->\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n        <!-- Modal -->\n        <div class=\"modal fade\" id=\"productModal\" tabindex=\"-1\" role=\"dialog\"\n          aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n            <div class=\"modal-dialog modal-lg\" role=\"document\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\" id=\"exampleModalLabel\">{{ product.title }}</h5>\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                        <span aria-hidden=\"true\">&times;</span> \n                        </button>\n                    </div>\n                    <div class=\"modal-body\">\n                    <img :src=\"product.imageUrl\" class=\"img-fluid\" alt=\"\">\n                        <blockquote class=\"blockquote mt-3\">\n                            <p class=\"mb-0\">{{ product.content }}</p>\n                            <footer class=\"blockquote-footer text-right\">{{ product.description }}</footer>\n                        </blockquote>\n                        <div class=\"d-flex justify-content-between align-items-baseline\">\n                            <div class=\"h4\" v-if=\"!product.price\">{{ product.origin_price }} 元</div>\n                            <del class=\"h6\" v-if=\"product.price\">原價 {{ product.origin_price }} 元</del>\n                            <div class=\"h4\" v-if=\"product.price\">現在只要{{ product.price }} 元</div>\n                        </div>\n                        <select name=\"\" class=\"form-control mt-3\" v-model=\"product.num\">\n                            <option :value=\"num\" v-for=\"num in 10\" :key=\"num\">\n                                選購 {{ num }} {{ product.unit }}\n                            </option>\n                        </select>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <div class=\"text-muted text-nowrap mr-3\">\n                            小計 <strong>{{ product.num * product.price }}</strong> 元\n                        </div>\n                        <button type=\"button\" class=\"btn btn-primary\"\n                        @click=\"addtoCart(product.id, product.num)\">\n                        <!-- <i class=\"fas fa-spinner fa-spin\" v-if=\"product.id === status.LoadingItem\"></i> -->\n                        加到購物車 \n                        </button>\n                    </div>\n                </div>\n            </div>\n         </div>\n\n  </div>\n</template>\n\n<script>\nimport $ from \"jquery\"; // 因為此元件無法使用 $，所以要先 import 才能使用\n\nexport default {\n  name: 'Home',\n  data() {\n    return {\n      products: [],\n      product: {},\n      searchText: '',\n      categories: [],\n      isLoading: false,\n      status: {   // 個別產品讀取效果\n                loadingItem: '',\n      },\n    };\n  },\n  computed: { // 篩選功能\n    filterData() {\n      const vm = this;\n      if (vm.searchText) {\n        return vm.products.filter((item) => {\n          const data = item.title.toLowerCase().includes(vm.searchText.toLowerCase());\n          return data;\n        });\n      }\n      return this.products;\n    },\n  },\n  methods: {\n    getProducts() {\n      const vm = this;\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/products/all`;\n      vm.isLoading = true;\n      this.$http.get(url).then((response) => {\n        vm.products = response.data.products;\n        //console.log('取得產品列表:', response);\n        vm.getUnique();\n        vm.isLoading = false;\n      });\n    },\n    getProduct(id) {   // 查看更多\n      const vm = this;\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/product/${id}`;\n      this.$http.get(api).then(response => { \n        //console.log(response);\n        vm.product = response.data.product;\n        //console.log(vm.product);\n        $('#productModal').modal('show');\n      }); \n     },\n    addtoCart(id, qty = 1) {\n      const vm = this;\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart`;\n      vm.isLoading = true;\n      const item = {\n        product_id: id,\n        qty,\n      };\n      vm.isLoading = true;\n      this.$http.post(url, { data: item }).then((response) => {\n        vm.isLoading = false;\n        console.log('加入購物車:', response);\n      });\n    },\n    getUnique() {\n      const vm = this;\n      const categories = new Set();\n      vm.products.forEach((item) => {\n        categories.add(item.category);\n      // console.log(categories);\n      });\n      vm.categories = Array.from(categories);\n      //console.log(vm.categories);\n    },   \n  },\n  created() {\n    this.getProducts();\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n\n/* img {\n  width: 50%;  \n  height: auto;\n} */\n\n.badge {\n  c​​lear: both;\n}\n\n</style>\n"]}]}